// Create Event for obj_controller
global.skins = [
    { name: "Player", object: obj_player },
    { name: "Ice Truck", object: obj_player_icetruck }
];

if (!instance_exists(obj_player) && !instance_exists(obj_player_icetruck)) {
    global.current_skin = "player"; // Starting skin
    global.player_instance = instance_create_layer(x, y, "Instances", obj_player); // Create player instance
} else {
    // Find the existing player or ice truck instance
    if (instance_exists(obj_player)) {
        global.current_skin = "player";
        global.player_instance = instance_find(obj_player, 0);
    } else if (instance_exists(obj_player_icetruck)) {
        global.current_skin = "icetruck";
        global.player_instance = instance_find(obj_player_icetruck, 0);
    }
}

// Initialize global variable for ice truck destruction state
if (!variable_global_exists("icetruck_destroyed")) {
    global.icetruck_destroyed = false;
}

show_debug_message("DEBUG: Create Event completed. Current skin: " + global.current_skin);
show_debug_message("DEBUG: Player instance ID: " + string(global.player_instance));