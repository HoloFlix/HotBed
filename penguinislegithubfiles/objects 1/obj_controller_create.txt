// Create Event for obj_controller
// Initialize global variables
global.skins = {
    player: {
        object: obj_player,
        sprite_right: spr_player_right,
        sprite_up: spr_player_up,
        sprite_up_left: spr_player_up_left,
        sprite_up_right: spr_player_up_right,
        sprite_left: spr_player_left,
        sprite_down: spr_player_down,
        sprite_down_left: spr_player_down_left,
        sprite_down_right: spr_player_down_left,
    },
    icetruck: {
        object: obj_player_icetruck,
        sprite_right: spr_icetruck_faceright,
        sprite_up: spr_icetruck_faceup,
        sprite_left: spr_icetruck_faceleft,
        sprite_down: spr_icetruck_facedown
    },
    tube: {
        object: obj_player_tube,
        sprite_right: spr_tube_right,
        sprite_up: spr_tube_up,
        sprite_left: spr_tube_left,
        sprite_down: spr_tube_down
    }
};
global.current_skin = "player"; // Starting skin
global.player_instance = noone; // Initialize player instance
global.icetruck_destroyed = false; // Initialize icetruck_destroyed

// Ensure player instance exists
if (!instance_exists(global.player_instance)) {
    switch_skin(global.current_skin);
}

// Debugging
if (instance_exists(global.player_instance)) {
    show_debug_message("Player instance created: " + string(global.player_instance));
} else {
    show_debug_message("Error: Failed to create player instance.");
}

// Initialize move_spd from the player instance
if (instance_exists(global.player_instance)) {
    move_spd = global.player_instance.move_spd;
}

// Initialize chat variables
global.chat_active = false;
global.chat_npc = noone;
